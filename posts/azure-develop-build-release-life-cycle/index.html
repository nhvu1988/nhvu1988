<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="pv-proxy-endpoint" content="https://nhvu1988.as.r.appspot.com/query?id=agx6YXN-bmh2dTE5ODhyFQsSCEFwaVF1ZXJ5GICAgOjXh4EKDA"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Azure Develop-Build-Release Life Cycle" /><meta name="author" content="nhvu1988" /><meta property="og:locale" content="en" /><meta name="description" content="Iâ€™m a full-stack developer, I can work any time, anywhere and whenever I have a chance." /><meta property="og:description" content="Iâ€™m a full-stack developer, I can work any time, anywhere and whenever I have a chance." /><link rel="canonical" href="https://nhvu1988.com/posts/azure-develop-build-release-life-cycle/" /><meta property="og:url" content="https://nhvu1988.com/posts/azure-develop-build-release-life-cycle/" /><meta property="og:site_name" content="Vu Nguyen" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-12-05T00:00:00+07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Azure Develop-Build-Release Life Cycle" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@nhvu1988" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"nhvu1988"},"dateModified":"2018-12-05T00:00:00+07:00","datePublished":"2018-12-05T00:00:00+07:00","description":"Iâ€™m a full-stack developer, I can work any time, anywhere and whenever I have a chance.","headline":"Azure Develop-Build-Release Life Cycle","mainEntityOfPage":{"@type":"WebPage","@id":"https://nhvu1988.com/posts/azure-develop-build-release-life-cycle/"},"url":"https://nhvu1988.com/posts/azure-develop-build-release-life-cycle/"}</script><title>Azure Develop-Build-Release Life Cycle | Vu Nguyen</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Vu Nguyen"><meta name="application-name" content="Vu Nguyen"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://nhvu1988.as.r.appspot.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://nhvu1988.as.r.appspot.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Vu Nguyen</a></div><div class="site-subtitle font-italic">A Full Stack Developer.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/resume/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>RÃ‰SUMÃ‰</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/nhvu1988" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://linkedin.com/in/nhvu1988" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['nhvu1988','gmail.com'].join('@')" aria-label="email" target="_blank" rel="noopener"> <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" target="_blank" rel="noopener"> <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Azure Develop-Build-Release Life Cycle</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Azure Develop-Build-Release Life Cycle</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/nhvu1988">Vu Nguyen</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2018-12-05 00:00:00 +0700" data-toggle="tooltip" data-placement="bottom" title="Wed, Dec 5, 2018, 12:00 AM +0700" >Dec 5, 2018</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1517 words"> <em>8 min</em> read</span> <span> <em id="pv" class="pageviews"> <i class="fas fa-spinner fa-spin fa-fw"></i> </em> views </span></div></div></div><div class="post-content"><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle.jpg" alt="" data-proofer-ignore></p><p>Azure provides many tools and services that fully and completely convenience for the software development, from code repository (source control), build, release and hosting applicationâ€¦ So in this post, I will introduce some concepts and fundamentals in my development process to work on Azure environment.</p><p>Azure has two main places that we work on. The first one is Visual Studio Team Services (VSTS) - now called Azure DevOps Services - which mostly used by developers and operations teams to develop and deploy the application. The second is Azure Portal where we use to view and manage the application resources such as web app, database, virtual machineâ€¦ and it also provides strong monitor tools to trace down issues and maintenance of the application.</p><p>In my sample website application, we have 3 projects, one is ASP.NET Web application, the second is NUnit Test project and the last is Azure Functions, all of them are created by Visual Studio in a single solution. As I would like to deploy them to two applications, one is an app service and another is Azure Functions in Azure environment.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-1.png" alt="" data-proofer-ignore></p><h2 id="develop">Develop<a href="#develop" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>We can use Git or TFS in VSTS to manage our codes and easily cooperate with any other Azure services, I wonâ€™t talk much this since Microsoft just bought Github so we can use Github as well. Since we use git-flow when developing so we always have 2 main branches, <code class="language-plaintext highlighter-rouge">develop</code> using for development only and <code class="language-plaintext highlighter-rouge">master</code> using for testing and deploying to production.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-2.png" alt="" data-proofer-ignore></p><h2 id="build-pipeline">Build Pipeline<a href="#build-pipeline" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>The main purpose of build tasks is compiling and verifying the source code, includes testing by performing unittest or integration test in a middle step as well. In the final step, it ends up with an <code class="language-plaintext highlighter-rouge">artifact</code> published that is ready to use in the <code class="language-plaintext highlighter-rouge">release</code> pipeline.</p><p>An <code class="language-plaintext highlighter-rouge">artifact</code> is the outputs of build tasks, it mays contains the package of files that we want to produce or anything else we want to deploy to our application. In .NET project, it often contains a <code class="language-plaintext highlighter-rouge">bin</code> folder with some draft <code class="language-plaintext highlighter-rouge">*.config</code> files such as ApplicationInsights.config, web.config or app.configâ€¦</p><p>A <code class="language-plaintext highlighter-rouge">build pipeline</code> could be used to build for a single project and publish one artifact or to build the whole solution with multiple projects that come with many artifacts in the final result. But I recommend that we should devide the solution to many single artifacts that will be run in many separated pipelines.</p><p>Since in my example, I just want to deploy 2 applications so I will create 2 build pipelines for them. The first build is for compiling Web application, doing unit-tests in Test project and publish a website package artifact. The second one is for compiling and publishing Azure Functions artifact only. Totally, we have 4 build pipelines like this</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-4.png" alt="" data-proofer-ignore></p><h2 id="agent-pool">Agent pool<a href="#agent-pool" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>When creating a new build pipeline, we need to select an <code class="language-plaintext highlighter-rouge">agent pool</code> to run the build tasks. The build agent mays depend on whichâ€™s kind of your project and the VS2017 should work at all excepting your project need to be built in macOS, please change to <code class="language-plaintext highlighter-rouge">Host macOS</code> instead.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-10.png" alt="" data-proofer-ignore></p><p>In my example, we will select <code class="language-plaintext highlighter-rouge">Hosted VS2017</code> to run, itâ€™s just a hosted machine having built-in VS2017 including all necessary components for the development.</p><h2 id="branch-trigger">Branch trigger<a href="#branch-trigger" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Whenever code is pushed to main branches, we will trigger a build <code class="language-plaintext highlighter-rouge">pipeline</code> automatically. Firstly, we need to setup for the trigger when code is published to the main branch.</p><p>In the <code class="language-plaintext highlighter-rouge">Trigger</code> tab of build pipeline, check to <code class="language-plaintext highlighter-rouge">Enable continuous integration</code> and select a main branch in <code class="language-plaintext highlighter-rouge">Branch filters</code> list.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-3.png" alt="" data-proofer-ignore></p><h2 id="build-tasks">Build Tasks<a href="#build-tasks" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>A .NET build pipeline often contains 4 basic tasks.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-6.png" alt="" data-proofer-ignore></p><p>They should be automatically generated when we select a build template, or we can start with an empty task and add them manually later.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-5.png" alt="" data-proofer-ignore></p><h3 id="nuget-restore">Nuget Restore<a href="#nuget-restore" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>The first step is nuget restore, it needs to restore Nuget libraries before making build .NET application. If we want to build whole solution, add path to <code class="language-plaintext highlighter-rouge">.sln</code> file to restore, otherwise select <code class="language-plaintext highlighter-rouge">packages.config</code> in a project to build for a single project.</p><h3 id="visual-studio-build">Visual Studio Build<a href="#visual-studio-build" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>The VSBuild task is very simple, just select the .sln to build whole solution or .csproj to build a single project. Other configurations could be keeped as default.</p><p>The important config in this step is <code class="language-plaintext highlighter-rouge">MSBuild Arguments</code> where we can put some build arguments but we will discuss it in another post since every argument fits a specific build scenario.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-7.png" alt="" data-proofer-ignore></p><h3 id="visual-studio-test">Visual Studio Test<a href="#visual-studio-test" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>We can use the default settings of the <code class="language-plaintext highlighter-rouge">Visual Studio Test</code> task and it will automatically detect and run test for all dlls having <code class="language-plaintext highlighter-rouge">tests</code> keyword, or we can have a simple modification in <code class="language-plaintext highlighter-rouge">Test Assembly</code> setting for compatible with our test project name. This task will run as the same with Test runner on Visual Studio same version.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-8.png" alt="" data-proofer-ignore></p><h3 id="publish-build-artifacts">Publish Build Artifacts<a href="#publish-build-artifacts" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>We just leave this task as default since it will copy all ouputs from artifact staging directory to a publish location in TFS server.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-9.png" alt="" data-proofer-ignore></p><h2 id="release-pipeline">Release Pipeline<a href="#release-pipeline" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>After an artifact is ready, we will create new release from a release definition and start deploying to Azure resource. Each release could contains one environment (formally <code class="language-plaintext highlighter-rouge">Stage</code> in VSTS) like <code class="language-plaintext highlighter-rouge">Dev</code> or multiple environments such as Test, Demo, Prod in my example.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-11.png" alt="" data-proofer-ignore></p><h3 id="variables-transform">Variables Transform<a href="#variables-transform" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Before deploying to Azure, we will do an important step that is transform all draft variables to correct variables matching to every specific environment. For example, we have a variable <code class="language-plaintext highlighter-rouge">Environment</code> that our application will read and know whichâ€™s environment itâ€™s running on. That variable stays in <code class="language-plaintext highlighter-rouge">Web.config</code>, its value is <code class="language-plaintext highlighter-rouge">Local</code> as Iâ€™m running locally but I would like to transform it to <code class="language-plaintext highlighter-rouge">Dev</code>, <code class="language-plaintext highlighter-rouge">Test</code>, <code class="language-plaintext highlighter-rouge">Demo</code>, or <code class="language-plaintext highlighter-rouge">Prod</code> when existing on the Azure app service.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-12.png" alt="" data-proofer-ignore></p><h3 id="pipeline-variables">Pipeline Variables<a href="#pipeline-variables" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>We can set that variable in the <code class="language-plaintext highlighter-rouge">Pipeline variables</code> and it will be automatically transformed during deployment process, just simply enable <code class="language-plaintext highlighter-rouge">XML variable substitution</code> in <code class="language-plaintext highlighter-rouge">Azure App Service Deploy</code> task.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-13.png" alt="" data-proofer-ignore></p><p>The <code class="language-plaintext highlighter-rouge">pipeline variables</code> will available to all tasks in the current release so it should contains all needed variables. It could be a <code class="language-plaintext highlighter-rouge">appSettings</code> in <code class="language-plaintext highlighter-rouge">web.config</code> or <code class="language-plaintext highlighter-rouge">app.config</code> file, the <code class="language-plaintext highlighter-rouge">AppServiceName</code> that we use in the deploy task, or anything else should be a dynamic variable.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-14.png" alt="" data-proofer-ignore></p><h3 id="variable-groups">Variable Groups<a href="#variable-groups" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>The <code class="language-plaintext highlighter-rouge">variable groups</code> are just the same and be used as the same with <code class="language-plaintext highlighter-rouge">pipeline variables</code>, excepts its values will available in cross releases. It means, all dynamic variables you want to use in multiple releases, just define and put them to a <code class="language-plaintext highlighter-rouge">variable group</code> in the Library section</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-15.png" alt="" data-proofer-ignore></p><p>So in my example, I will move the <code class="language-plaintext highlighter-rouge">Environment</code> variable to the variable group <code class="language-plaintext highlighter-rouge">Dev</code> since I would like that variable is available and can be read in <code class="language-plaintext highlighter-rouge">Deploy AzureFunctions to Dev</code> release as well. So I will link the variable group <code class="language-plaintext highlighter-rouge">Dev</code> to both <code class="language-plaintext highlighter-rouge">Deploy Web to Dev</code> and <code class="language-plaintext highlighter-rouge">Deploy AzureFunctions to Dev</code>.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-16.png" alt="" data-proofer-ignore></p><p>Now, all tasks in both releases to Dev can read the <code class="language-plaintext highlighter-rouge">Environment</code> with the value is <code class="language-plaintext highlighter-rouge">Dev</code> as the same.</p><h3 id="continuous-deployment-trigger">Continuous Deployment Trigger<a href="#continuous-deployment-trigger" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>We can enable the trigger on whenever an artifact is ready, a new release will be created and deploy application automatically.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-18.png" alt="" data-proofer-ignore></p><p>And for auto deploying to specific environment. Itâ€™s recommended to enable this trigger for development only, and other environments should be deployed in person.</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-17.png" alt="" data-proofer-ignore></p><h2 id="azure-portal">Azure Portal<a href="#azure-portal" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Since Azure Devops is used for development and deployment process, the Azure portal is the place for resource management and application monitoring. We will work with the application resource and its third party services, all available Azure services could be managed and accessed from there.</p><p>Azure Portal provides a strong management and monitoring tool names <code class="language-plaintext highlighter-rouge">Monitor</code> combining from two services are <code class="language-plaintext highlighter-rouge">Log Analytics</code> and <code class="language-plaintext highlighter-rouge">Application Insights</code>. Both of them could be integrated and configurated easily in our application. They will automatically collect activity logs, diagnostic logs and telemetry from our applications and visualize it to portal, so we can check our application health, measure application performanceâ€¦</p><h2 id="arm-template">ARM template<a href="#arm-template" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>ARM stands for Azure Resource Manager, itâ€™s a JSON file that contains all Azure resourceâ€™s information that we want to manage. So in my example, I will create a JSON that contains 2 resource items, the first one is an app service for the web application, the second is a Azure Functions for the functions app.</p><div class="language-json highlighter-rouge"><div class="code-header"> <span label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contentVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Web Application Sample"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Microsoft.Web/sites"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-01"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Southeast Asia"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Functions Application Sample"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Microsoft.Web/sites"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"functionapp"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-01"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Southeast Asia"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>In the ARM template, we can add many things, including every application property, configuration settingsâ€¦ so itâ€™s recommended we should update the ARM in every changes in the Azure resource that need to be updated. Since it helps us to keep track what was the change and when the change was effected.</p><p>The ARM template could be managed in a VS project and automatically deployed in VSTS as well. So I have created one more project in my sample solution like this</p><p><img data-src="/assets/img/posts/20181205-azure-develop-build-release-life-cycle-19.png" alt="" data-proofer-ignore></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/devops/'>DevOps</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/azure/" class="post-tag no-text-decoration" >azure</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Azure Develop-Build-Release Life Cycle - Vu Nguyen&url=https://nhvu1988.com/posts/azure-develop-build-release-life-cycle/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Azure Develop-Build-Release Life Cycle - Vu Nguyen&u=https://nhvu1988.com/posts/azure-develop-build-release-life-cycle/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Azure Develop-Build-Release Life Cycle - Vu Nguyen&url=https://nhvu1988.com/posts/azure-develop-build-release-life-cycle/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/how-to-create-msi-installer-using-vs-installer/">How to create .msi installer using VS Installer</a><li><a href="/posts/azure-devops-what-i-have-done-part-2/">Azure DevOps - What I Have Done - Part 2</a><li><a href="/posts/how-to-use-cloudflare-access-to-protect-azure-web-app/">How to use Cloudflare Access to protect Azure Web App</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/azure/">azure</a> <a class="post-tag" href="/tags/data-factory/">data-factory</a> <a class="post-tag" href="/tags/ext-net/">ext.net</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/vs-installer/">vs installer</a> <a class="post-tag" href="/tags/angular/">angular</a> <a class="post-tag" href="/tags/async/">async</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/data-factory-three-basic-things/"><div class="card-body"> <em class="timeago small" date="2017-12-02 00:00:00 +0700" >Dec 2, 2017</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Azure Data Factory - Three basic things</h3><div class="text-muted small"><p> (Updated) 2020-05-03 - Data Factory V2 was released, see changes here. Azure Data Factory (DF) is an Azure service helps to copy and transform data from data source to another data source, and...</p></div></div></a></div><div class="card"> <a href="/posts/data-factory-how-to-deploy-by-powerscript/"><div class="card-body"> <em class="timeago small" date="2017-12-03 00:00:00 +0700" >Dec 3, 2017</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Azure Data Factory - How to deploy by powershell</h3><div class="text-muted small"><p> In this blog, I will introduce how to create an automation script that can deploy the Data Factoryâ€™s resources to Azure with one keypress ðŸ†’. So, I will reuse the resources on Data Factory - 3 basic...</p></div></div></a></div><div class="card"> <a href="/posts/data-factory-how-to-deploy-on-azure-portal/"><div class="card-body"> <em class="timeago small" date="2017-12-03 00:00:00 +0700" >Dec 3, 2017</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Azure Data Factory - How to deploy on Azure portal</h3><div class="text-muted small"><p> In the previous blog, we have prepared 3 basic things that enough for Data Factory can work on. Now I will continue with deploying them to Data Factory through Azure portal. Create Data Factory ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/azure-devops-what-i-have-done/" class="btn btn-outline-primary" prompt="Older"><p>Azure DevOps - What I Have Done</p></a> <a href="/posts/a-simple-foreachasync/" class="btn btn-outline-primary" prompt="Newer"><p>A Simple ForeachAsync</p></a></div><script src="https://utteranc.es/client.js" repo="nhvu1988/nhvu1988" issue-term="title" crossorigin="anonymous" async> </script> <script type="text/javascript"> $(function() { const origin = "https://utteranc.es"; const iframe = "iframe.utterances-frame"; const lightTheme = "github-light"; const darkTheme = "github-dark"; let initTheme = lightTheme; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } addEventListener("message", (event) => { let theme; /* credit to <https://github.com/utterance/utterances/issues/170#issuecomment-594036347> */ if (event.origin === origin) { /* page initial */ theme = initTheme; } else if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); } else { return; } const message = { type: "set-theme", theme: theme }; const utterances = document.querySelector(iframe).contentWindow; utterances.postMessage(message, origin); }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> Â© 2022 <a href="https://github.com/nhvu1988">Vu Nguyen</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/azure/">azure</a> <a class="post-tag" href="/tags/data-factory/">data-factory</a> <a class="post-tag" href="/tags/ext-net/">ext.net</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/vs-installer/">vs installer</a> <a class="post-tag" href="/tags/angular/">angular</a> <a class="post-tag" href="/tags/async/">async</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/npm/countup.js@1.9.3/dist/countUp.min.js"></script> <script defer src="/assets/js/dist/pvreport.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-Y3VRT9THFK"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-Y3VRT9THFK'); }); </script>
